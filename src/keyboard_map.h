#include "libretro.h"
#include "godot_cpp/classes/global_constants.hpp"
#include <unordered_map>

// A helper function to map godot::Key to retro_key
retro_key godotKeyToRetroKey(godot::Key key)
{
    static const std::unordered_map<godot::Key, retro_key> key_map = {
        {godot::Key::KEY_UNKNOWN, RETROK_UNKNOWN},
        {godot::Key::KEY_BACKSPACE, RETROK_BACKSPACE},
        {godot::Key::KEY_TAB, RETROK_TAB},
        {godot::Key::KEY_CLEAR, RETROK_CLEAR},
        {godot::Key::KEY_ENTER, RETROK_RETURN},
        {godot::Key::KEY_PAUSE, RETROK_PAUSE},
        {godot::Key::KEY_ESCAPE, RETROK_ESCAPE},
        {godot::Key::KEY_SPACE, RETROK_SPACE},
        {godot::Key::KEY_EXCLAM, RETROK_EXCLAIM},
        {godot::Key::KEY_QUOTEDBL, RETROK_QUOTEDBL},
        {godot::Key::KEY_NUMBERSIGN, RETROK_HASH},
        {godot::Key::KEY_DOLLAR, RETROK_DOLLAR},
        {godot::Key::KEY_AMPERSAND, RETROK_AMPERSAND},
        {godot::Key::KEY_APOSTROPHE, RETROK_QUOTE},
        {godot::Key::KEY_PARENLEFT, RETROK_LEFTPAREN},
        {godot::Key::KEY_PARENRIGHT, RETROK_RIGHTPAREN},
        {godot::Key::KEY_ASTERISK, RETROK_ASTERISK},
        {godot::Key::KEY_PLUS, RETROK_PLUS},
        {godot::Key::KEY_COMMA, RETROK_COMMA},
        {godot::Key::KEY_MINUS, RETROK_MINUS},
        {godot::Key::KEY_PERIOD, RETROK_PERIOD},
        {godot::Key::KEY_SLASH, RETROK_SLASH},
        {godot::Key::KEY_0, RETROK_0},
        {godot::Key::KEY_1, RETROK_1},
        {godot::Key::KEY_2, RETROK_2},
        {godot::Key::KEY_3, RETROK_3},
        {godot::Key::KEY_4, RETROK_4},
        {godot::Key::KEY_5, RETROK_5},
        {godot::Key::KEY_6, RETROK_6},
        {godot::Key::KEY_7, RETROK_7},
        {godot::Key::KEY_8, RETROK_8},
        {godot::Key::KEY_9, RETROK_9},
        {godot::Key::KEY_COLON, RETROK_COLON},
        {godot::Key::KEY_SEMICOLON, RETROK_SEMICOLON},
        {godot::Key::KEY_LESS, RETROK_LESS},
        {godot::Key::KEY_EQUAL, RETROK_EQUALS},
        {godot::Key::KEY_GREATER, RETROK_GREATER},
        {godot::Key::KEY_QUESTION, RETROK_QUESTION},
        {godot::Key::KEY_AT, RETROK_AT},
        {godot::Key::KEY_BRACKETLEFT, RETROK_LEFTBRACKET},
        {godot::Key::KEY_BACKSLASH, RETROK_BACKSLASH},
        {godot::Key::KEY_BRACKETRIGHT, RETROK_RIGHTBRACKET},
        {godot::Key::KEY_ASCIICIRCUM, RETROK_CARET},
        {godot::Key::KEY_UNDERSCORE, RETROK_UNDERSCORE},
        {godot::Key::KEY_QUOTELEFT, RETROK_BACKQUOTE},
        {godot::Key::KEY_A, RETROK_a},
        {godot::Key::KEY_B, RETROK_b},
        {godot::Key::KEY_C, RETROK_c},
        {godot::Key::KEY_D, RETROK_d},
        {godot::Key::KEY_E, RETROK_e},
        {godot::Key::KEY_F, RETROK_f},
        {godot::Key::KEY_G, RETROK_g},
        {godot::Key::KEY_H, RETROK_h},
        {godot::Key::KEY_I, RETROK_i},
        {godot::Key::KEY_J, RETROK_j},
        {godot::Key::KEY_K, RETROK_k},
        {godot::Key::KEY_L, RETROK_l},
        {godot::Key::KEY_M, RETROK_m},
        {godot::Key::KEY_N, RETROK_n},
        {godot::Key::KEY_O, RETROK_o},
        {godot::Key::KEY_P, RETROK_p},
        {godot::Key::KEY_Q, RETROK_q},
        {godot::Key::KEY_R, RETROK_r},
        {godot::Key::KEY_S, RETROK_s},
        {godot::Key::KEY_T, RETROK_t},
        {godot::Key::KEY_U, RETROK_u},
        {godot::Key::KEY_V, RETROK_v},
        {godot::Key::KEY_W, RETROK_w},
        {godot::Key::KEY_X, RETROK_x},
        {godot::Key::KEY_Y, RETROK_y},
        {godot::Key::KEY_Z, RETROK_z},
        {godot::Key::KEY_BRACELEFT, RETROK_LEFTBRACE},
        {godot::Key::KEY_BAR, RETROK_BAR},
        {godot::Key::KEY_BRACERIGHT, RETROK_RIGHTBRACE},
        {godot::Key::KEY_ASCIITILDE, RETROK_TILDE},
        {godot::Key::KEY_DELETE, RETROK_DELETE},
        {godot::Key::KEY_KP_MULTIPLY, RETROK_KP_MULTIPLY},
        {godot::Key::KEY_KP_DIVIDE, RETROK_KP_DIVIDE},
        {godot::Key::KEY_KP_SUBTRACT, RETROK_KP_MINUS},
        {godot::Key::KEY_KP_PERIOD, RETROK_KP_PERIOD},
        {godot::Key::KEY_KP_ADD, RETROK_KP_PLUS},
        {godot::Key::KEY_KP_0, RETROK_KP0},
        {godot::Key::KEY_KP_1, RETROK_KP1},
        {godot::Key::KEY_KP_2, RETROK_KP2},
        {godot::Key::KEY_KP_3, RETROK_KP3},
        {godot::Key::KEY_KP_4, RETROK_KP4},
        {godot::Key::KEY_KP_5, RETROK_KP5},
        {godot::Key::KEY_KP_6, RETROK_KP6},
        {godot::Key::KEY_KP_7, RETROK_KP7},
        {godot::Key::KEY_KP_8, RETROK_KP8},
        {godot::Key::KEY_KP_9, RETROK_KP9},
        {godot::Key::KEY_KP_ENTER, RETROK_KP_ENTER},
        {godot::Key::KEY_UP, RETROK_UP},
        {godot::Key::KEY_DOWN, RETROK_DOWN},
        {godot::Key::KEY_RIGHT, RETROK_RIGHT},
        {godot::Key::KEY_LEFT, RETROK_LEFT},
        {godot::Key::KEY_INSERT, RETROK_INSERT},
        {godot::Key::KEY_HOME, RETROK_HOME},
        {godot::Key::KEY_END, RETROK_END},
        {godot::Key::KEY_PAGEUP, RETROK_PAGEUP},
        {godot::Key::KEY_PAGEDOWN, RETROK_PAGEDOWN},
        {godot::Key::KEY_F1, RETROK_F1},
        {godot::Key::KEY_F2, RETROK_F2},
        {godot::Key::KEY_F3, RETROK_F3},
        {godot::Key::KEY_F4, RETROK_F4},
        {godot::Key::KEY_F5, RETROK_F5},
        {godot::Key::KEY_F6, RETROK_F6},
        {godot::Key::KEY_F7, RETROK_F7},
        {godot::Key::KEY_F8, RETROK_F8},
        {godot::Key::KEY_F9, RETROK_F9},
        {godot::Key::KEY_F10, RETROK_F10},
        {godot::Key::KEY_F11, RETROK_F11},
        {godot::Key::KEY_F12, RETROK_F12},
        {godot::Key::KEY_F13, RETROK_F13},
        {godot::Key::KEY_F14, RETROK_F14},
        {godot::Key::KEY_F15, RETROK_F15},
        {godot::Key::KEY_NUMLOCK, RETROK_NUMLOCK},
        {godot::Key::KEY_CAPSLOCK, RETROK_CAPSLOCK},
        {godot::Key::KEY_SCROLLLOCK, RETROK_SCROLLOCK},
        {godot::Key::KEY_SHIFT, RETROK_RSHIFT},
        {godot::Key::KEY_CTRL, RETROK_RCTRL},
        {godot::Key::KEY_META, RETROK_RMETA},
        {godot::Key::KEY_ALT, RETROK_RALT},
        {godot::Key::KEY_MENU, RETROK_MENU},
        {godot::Key::KEY_HELP, RETROK_HELP},
        {godot::Key::KEY_PRINT, RETROK_PRINT},
        {godot::Key::KEY_SYSREQ, RETROK_SYSREQ}
    };

    auto it = key_map.find(key);
    return (it != key_map.end()) ? it->second : RETROK_UNKNOWN;
}
